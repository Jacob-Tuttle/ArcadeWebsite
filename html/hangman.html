<!DOCTYPE html>

<html lang="en">
    <head>
        <title>Hang Man</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <style>
            body{
                margin:0;
                background-image: url("../download.png");
                background-size: contain;
            }

            a{
                text-decoration: none;
                color: inherit;
            }

            h2{
                margin:0;
            }

            #menu-bar{
                display:flex;
                align-items: center;

                justify-content: space-between; /* Distribute items evenly with space between them */
                padding: 10px 0;
                width:100%;
                background-color: lightgrey;
            }

            #home-button{
                padding-left: 20px;
                color:blue;
            }

            #github-repo-button{
                padding-right: 30px;
            }

            #game-container{
                max-width: 500px; /* Maximum width for the game container */
                margin: 20px auto; /* Center the game container horizontally and add consistent margin */
                padding: 20px; /* Padding around the game container */
                background-color: lightgray;
                border-radius: 10px;
                text-align: center;

            }

            #hangman {
                margin: 0 auto;
                height: 200px;
                width: 200px;
                background-color: gray;
                /* Added styles to center the image and make it fit inside the box */
                overflow: hidden; /* Hide any parts of the image that exceed the box */
            }

            #hangman img {
                height: 200px;
                width: 200px;
                /* Prevent the image from being larger than its container */
            }

            #word-to-be-guessed{
                display: flex;
                justify-content: space-evenly;
            }

            .letter-box{
                width: 20px;
                height: 40px;
                background-color: lightgray;
                border-bottom: 2px solid black;
                display: flex;
                justify-content: center;
                align-items: center;
                margin-right: 10px;
                margin-top: 20px;
            }

            .letter-box-empty{
                width: 20px;
                height: 40px;
                background-color: lightgray;
                margin-right: 10px;
                margin-top: 20px;
            }

            #already-guessed-letters{
                width: 100%;
                height: 50px;
                background-color: lightgray;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .guessed-letter{
                margin-right:10px;
            }

            #title-guessed-letters{
                margin-top: 20px;
            }

            .alphabet-buttons {
                display: flex;
                flex-wrap: wrap;
                gap: 5px;
                margin-top: 20px;
            }

            .alphabet-button {
                width: 20px;
                height: 40px;
                padding: 5px;
                text-align: center;
                background-color: #007bff;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
            }

            .alphabet-button:hover {
                background-color: #0056b3;
            }

            .oval {
                width: 100px;
                height: 50px;
                background-color: forestgreen; /* Blue background color, you can change it */
                border-radius: 50%; /* Creates an oval shape */
                position: relative;
                overflow: hidden; /* Ensures bars and text stay within the oval */
                display: flex;
                justify-content: center;
                align-items: center;

            }

            .bar {
                position: absolute;
                width: 70%;
                height: 8px; /* Height of the bars, adjust as needed */
                top: 50%; /* Positions bars vertically at the center */
                transform: translateY(-50%);
                border-radius: 10px;
            }

            .bar.top {
                margin-top: 5px;
                top: 20%; /* Adjust top bar's position */
                background-color: darkred;
            }

            .bar.bottom {
                top: 70%; /* Adjust bottom bar's position */
                background-color: blue;

            }

            .text {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                color: #ffffff; /* Text color, you can change it */
                font-size: 12px; /* Adjust font size as needed */
                font-weight: bold; /* Optionally make text bold */
                text-align: center;
            }

        </style>

    </head>

    <body>
        <div id="menu-bar">
            <a id="home-button" href="home-screen.html">
                <div class="oval">
                    <div class="bar top"></div>
                    <div class="bar bottom"></div>
                    <div class="text">Jacob's Arcade</div>
                </div>
            </a>
            <!--Source: https://www.flaticon.com/free-icons/cat-->
            <a id="github-repo-button" href="https://github.com/Jacob-Tuttle/ArcadeWebsite"><img alt="Cat icons created by Dave Gandy - Flaticon" src="../github-logo.png"></a>
        </div>

        <div id="game-container">
            <div id="hangman"></div>

            <div id="word-to-be-guessed"></div>

            <div>
                <h2 id="title-guessed-letters">Already Guessed Letters</h2>
            </div>

            <div id="already-guessed-letters"></div>

            <div class="alphabet-buttons">
                <button id="Alphabet-Button-1" class="alphabet-button">A</button>
                <button id="Alphabet-Button-2" class="alphabet-button">B</button>
                <button id="Alphabet-Button-3" class="alphabet-button">C</button>
                <button id="Alphabet-Button-4" class="alphabet-button">D</button>
                <button id="Alphabet-Button-5" class="alphabet-button">E</button>
                <button id="Alphabet-Button-6" class="alphabet-button">F</button>
                <button id="Alphabet-Button-7" class="alphabet-button">G</button>
                <button id="Alphabet-Button-8" class="alphabet-button">H</button>
                <button id="Alphabet-Button-9" class="alphabet-button">I</button>
                <button id="Alphabet-Button-10" class="alphabet-button">J</button>
                <button id="Alphabet-Button-11" class="alphabet-button">K</button>
                <button id="Alphabet-Button-12" class="alphabet-button">L</button>
                <button id="Alphabet-Button-13" class="alphabet-button">M</button>
                <button id="Alphabet-Button-14" class="alphabet-button">N</button>
                <button id="Alphabet-Button-15" class="alphabet-button">O</button>
                <button id="Alphabet-Button-16" class="alphabet-button">P</button>
                <button id="Alphabet-Button-17" class="alphabet-button">Q</button>
                <button id="Alphabet-Button-18" class="alphabet-button">R</button>
                <button id="Alphabet-Button-19" class="alphabet-button">S</button>
                <button id="Alphabet-Button-20" class="alphabet-button">T</button>
                <button id="Alphabet-Button-21" class="alphabet-button">U</button>
                <button id="Alphabet-Button-22" class="alphabet-button">V</button>
                <button id="Alphabet-Button-23" class="alphabet-button">W</button>
                <button id="Alphabet-Button-24" class="alphabet-button">X</button>
                <button id="Alphabet-Button-25" class="alphabet-button">Y</button>
                <button id="Alphabet-Button-26" class="alphabet-button">Z</button>
            </div>
        </div>

        <script>

            const wordBank = ["ALMOST", "ALONE", "ALONG", "ALREADY", "ANNIVERSARY", "ANNOUNCE", "ANNUAL", "ANOTHER", "ANSWER", "BEFORE", "BEGIN", "BEGINNING", "BEHAVIOR", "BEHIND", "BEING", "BELIEF", "BELIEVE", "BIOLOGICAL", "BIRD", "BIRTH", "BIRTHDAY", "BIT", "BITE", "BLACK", "BLADE", "BLAME", "BLANKET", "BLIND", "BLOCK", "BLOOD", "BLOW", "CERTAIN", "CERTAINLY", "CHAIN", "CHAIR", "CHAIRMAN", "CHALLENGE", "CHAMBER", "CHAMPION", "CHAMPIONSHIP", "CHANCE", "CHANGE", "CHANGING", "CHANNEL", "CHAPTER", "CHARACTER", "DEFENSIVE", "DEFICIT", "DEFINE", "DEFINITELY", "DEFINITION", "DEGREE", "DELAY", "DELIVER", "DELIVERY", "DEMAND", "DEMOCRACY", "DEMOCRAT", "DEMOCRATIC", "DEMONSTRATE", "DEMONSTRATION", "DENY", "DEPARTMENT", "DEPEND", "DEPENDENT", "EDUCATOR", "EFFECT", "EFFECTIVE", "EFFECTIVELY", "EFFICIENCY", "EFFICIENT", "EFFORT", "EGG", "EIGHT", "EITHER", "ELDERLY", "FATE", "FATHER", "FAULT", "FAVOR", "FAVORITE", "FEAR", "FEATURE", "FEDERAL", "FEE", "FEED", "FEEL", "FEELING", "FELLOW", "FEMALE"];
            const availableLetters = document.querySelectorAll(".alphabet-button");
            function generateRandomNumber() {return Math.floor(Math.random() * wordBank.length-1) + 1;}
            const x = generateRandomNumber();
            const chosenWord = wordBank[x];
            console.log(chosenWord)


            let hangmanStage = 0;
            let hasWon = false;
            let countNumberMatched = 0;


            document.addEventListener('DOMContentLoaded', () => {
                availableLetters.forEach(letter => letter.addEventListener('click', handleAvailableLetterClick));
            });

            displayWordToGuess();
            progressHangmanStage(hangmanStage);
            hangmanStage++;

            function displayWordToGuess(){
                for (let x = 0; x < chosenWord.length; x++){
                    let letter = chosenWord[x];
                    if(letter === " "){
                        addLetterBoxToDom(true);
                    }
                    else{
                        addLetterBoxToDom(false, x);
                    }
                }
            }

            function displayWinMessage(){
                let gameContainer = document.querySelector('#game-container');

                let newDiv = document.createElement('div');
                newDiv.id = "winner"
                newDiv.textContent = "Winner!";
                newDiv.style.color = "green";
                newDiv.style.fontSize = "20px";
                let newDiv2 = document.createElement('div');
                newDiv2.id = "refresh"
                newDiv2.textContent = "Refresh the page to restart";
                newDiv2.style.color = "black";
                newDiv2.style.fontSize = "16px";
                gameContainer.appendChild(newDiv);
                gameContainer.appendChild(newDiv2);
            }

            function displayLoseMessage(){
                let gameContainer = document.querySelector('#game-container');

                let newDiv = document.createElement('div');
                newDiv.id = "loser"
                newDiv.textContent = "Game Over!";
                newDiv.style.color = "red";
                newDiv.style.fontSize = "20px";
                let newDiv2 = document.createElement('div');
                newDiv2.id = "refresh"
                newDiv2.textContent = "Refresh the page to restart";
                newDiv2.style.color = "black";
                newDiv2.style.fontSize = "16px";
                gameContainer.appendChild(newDiv);
                gameContainer.appendChild(newDiv2);
            }
            function addLetterBoxToDom(blank, letterPositionInWord){
                const parentElement = document.querySelector('#word-to-be-guessed');
                if(blank === true){
                    const newDiv = document.createElement('div');
                    newDiv.classList.add('letter-box-empty');
                    parentElement.appendChild(newDiv);
                }
                else{
                    const newDiv = document.createElement('div');
                    newDiv.classList.add('letter-box');
                    newDiv.id = "letter-box-" + letterPositionInWord;
                    parentElement.appendChild(newDiv);
                }


            }

            function handleAvailableLetterClick(event){
                if(hangmanStage !== 7 && hasWon === false) {

                    const clickedLetter = event.target.textContent;
                    let matched = false;

                    for (let x = 0; x < chosenWord.length; x++) {
                        if (clickedLetter === chosenWord[x]) {
                            countNumberMatched++;
                            const editLetterBox = document.querySelector('#letter-box-' + x);
                            editLetterBox.textContent = chosenWord[x].toString();
                            matched = true;
                        }
                    }
                    if (matched === false) {
                        progressHangmanStage(hangmanStage);
                        hangmanStage++;
                    }


                    addLetterToUsedList(clickedLetter);
                    removeLetterFromAvailableLetters(clickedLetter);
                    if (countNumberMatched === chosenWord.length){
                        displayWinMessage();
                        hasWon=true;
                    }
                    if(hangmanStage === 7){
                        displayLoseMessage();
                    }
                }
            }

            function removeLetterFromAvailableLetters(letterToRemove){
                availableLetters.forEach(letter => {
                    if (letter.textContent === letterToRemove) {
                        letter.remove();
                    }
                });
            }

            function addLetterToUsedList(letterToAdd){
                const usedBank = document.querySelector('#already-guessed-letters');

                const newDiv = document.createElement('div');
                newDiv.classList.add('guessed-letter');
                newDiv.textContent = letterToAdd;

                usedBank.appendChild(newDiv);
            }

            function progressHangmanStage(stage){
                const hangmanDisplay = document.querySelector('#hangman');
                const hangmanImg = hangmanDisplay.querySelector('img');

                if (!hangmanImg) {
                    // If there's no img element inside #hangman, create one
                    const newHangmanImg = document.createElement('img');
                    newHangmanImg.src = `../stage${stage}.png`;
                    hangmanDisplay.appendChild(newHangmanImg);
                } else {
                    // If there's already an img element, update its src attribute
                    hangmanImg.src = `../stage${stage}.png`;
                }
            }

        </script>
    </body>

</html>